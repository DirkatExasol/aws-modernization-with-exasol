!function(e){function t(t){for(var r,s,a=t[0],c=t[1],l=t[2],d=0,m=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);m.length;)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={0:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;i.push([454,1]),n()}({309:function(e,t){},340:function(e,t,n){(function(e,t,r){(()=>{if(void 0!==e);else if("undefined"!=typeof window)window.global=window;else{if("undefined"==typeof self)throw new Error("cannot export Go (neither global, window nor self is defined)");self.global=self}if(e.require||(e.require=n(341)),!e.fs&&e.require){const t=n(342);"object"==typeof t&&null!==t&&0!==Object.keys(t).length&&(e.fs=t)}const o=()=>{const e=new Error("not implemented");return e.code="ENOSYS",e};if(!e.fs){let t="";e.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(e,n){t+=s.decode(n);const r=t.lastIndexOf("\n");return-1!=r&&(console.log(t.substr(0,r)),t=t.substr(r+1)),n.length},write(e,t,n,r,i,s){if(0!==n||r!==t.length||null!==i)return void s(o());s(null,this.writeSync(e,t))},chmod(e,t,n){n(o())},chown(e,t,n,r){r(o())},close(e,t){t(o())},fchmod(e,t,n){n(o())},fchown(e,t,n,r){r(o())},fstat(e,t){t(o())},fsync(e,t){t(null)},ftruncate(e,t,n){n(o())},lchown(e,t,n,r){r(o())},link(e,t,n){n(o())},lstat(e,t){t(o())},mkdir(e,t,n){n(o())},open(e,t,n,r){r(o())},read(e,t,n,r,i,s){s(o())},readdir(e,t){t(o())},readlink(e,t){t(o())},rename(e,t,n){n(o())},rmdir(e,t){t(o())},stat(e,t){t(o())},symlink(e,t,n){n(o())},truncate(e,t,n){n(o())},unlink(e,t){t(o())},utimes(e,t,n,r){r(o())}}}if(e.process||(e.process={getuid:()=>-1,getgid:()=>-1,geteuid:()=>-1,getegid:()=>-1,getgroups(){throw o()},pid:-1,ppid:-1,umask(){throw o()},cwd(){throw o()},chdir(){throw o()}}),!e.crypto&&e.require){const t=n(42);e.crypto={getRandomValues(e){t.randomFillSync(e)}}}if(!e.crypto)throw new Error("global.crypto is not available, polyfill required (getRandomValues only)");if(e.performance||(e.performance={now(){const[e,n]=t.hrtime();return 1e3*e+n/1e6}}),!e.TextEncoder&&e.require&&(e.TextEncoder=n(103).TextEncoder),!e.TextEncoder)throw new Error("global.TextEncoder is not available, polyfill required");if(!e.TextDecoder&&e.require&&(e.TextDecoder=n(103).TextDecoder),!e.TextDecoder)throw new Error("global.TextDecoder is not available, polyfill required");const i=new TextEncoder("utf-8"),s=new TextDecoder("utf-8");if(e.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{0!==e&&console.warn("exit code:",e)},this._exitPromise=new Promise(e=>{this._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const e=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},t=e=>this.mem.getUint32(e+0,!0)+4294967296*this.mem.getInt32(e+4,!0),n=e=>{const t=this.mem.getFloat64(e,!0);if(0===t)return;if(!isNaN(t))return t;const n=this.mem.getUint32(e,!0);return this._values[n]},r=(e,t)=>{if("number"==typeof t&&0!==t)return isNaN(t)?(this.mem.setUint32(e+4,2146959360,!0),void this.mem.setUint32(e,0,!0)):void this.mem.setFloat64(e,t,!0);if(void 0===t)return void this.mem.setFloat64(e,0,!0);let n=this._ids.get(t);void 0===n&&(n=this._idPool.pop(),void 0===n&&(n=this._values.length),this._values[n]=t,this._goRefCounts[n]=0,this._ids.set(t,n)),this._goRefCounts[n]++;let r=0;switch(typeof t){case"object":null!==t&&(r=1);break;case"string":r=2;break;case"symbol":r=3;break;case"function":r=4}this.mem.setUint32(e+4,2146959360|r,!0),this.mem.setUint32(e,n,!0)},o=e=>{const n=t(e+0),r=t(e+8);return new Uint8Array(this._inst.exports.mem.buffer,n,r)},a=e=>{const r=t(e+0),o=t(e+8),i=new Array(o);for(let e=0;e<o;e++)i[e]=n(r+8*e);return i},c=e=>{const n=t(e+0),r=t(e+8);return s.decode(new DataView(this._inst.exports.mem.buffer,n,r))},l=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{const n=t((e>>>=0)+8),r=t(e+16),o=this.mem.getInt32(e+24,!0);fs.writeSync(n,new Uint8Array(this._inst.exports.mem.buffer,r,o))},"runtime.resetMemoryDataView":e=>{this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":t=>{e((t>>>=0)+8,1e6*(l+performance.now()))},"runtime.walltime":t=>{t>>>=0;const n=(new Date).getTime();e(t+8,n/1e3),this.mem.setInt32(t+16,n%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{e>>>=0;const n=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(n,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(n);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},t(e+8)+1)),this.mem.setInt32(e+16,n,!0)},"runtime.clearTimeoutEvent":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{e>>>=0,crypto.getRandomValues(o(e+8))},"syscall/js.finalizeRef":e=>{e>>>=0;const t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,0===this._goRefCounts[t]){const e=this._values[t];this._values[t]=null,this._ids.delete(e),this._idPool.push(t)}},"syscall/js.stringVal":e=>{r((e>>>=0)+24,c(e+8))},"syscall/js.valueGet":e=>{e>>>=0;const t=Reflect.get(n(e+8),c(e+16));e=this._inst.exports.getsp()>>>0,r(e+32,t)},"syscall/js.valueSet":e=>{e>>>=0,Reflect.set(n(e+8),c(e+16),n(e+32))},"syscall/js.valueDelete":e=>{e>>>=0,Reflect.deleteProperty(n(e+8),c(e+16))},"syscall/js.valueIndex":e=>{r((e>>>=0)+24,Reflect.get(n(e+8),t(e+16)))},"syscall/js.valueSetIndex":e=>{e>>>=0,Reflect.set(n(e+8),t(e+16),n(e+24))},"syscall/js.valueCall":e=>{e>>>=0;try{const t=n(e+8),o=Reflect.get(t,c(e+16)),i=a(e+32),s=Reflect.apply(o,t,i);e=this._inst.exports.getsp()>>>0,r(e+56,s),this.mem.setUint8(e+64,1)}catch(t){e=this._inst.exports.getsp()>>>0,r(e+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{e>>>=0;try{const t=n(e+8),o=a(e+16),i=Reflect.apply(t,void 0,o);e=this._inst.exports.getsp()>>>0,r(e+40,i),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,r(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{e>>>=0;try{const t=n(e+8),o=a(e+16),i=Reflect.construct(t,o);e=this._inst.exports.getsp()>>>0,r(e+40,i),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,r(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":t=>{e((t>>>=0)+16,parseInt(n(t+8).length))},"syscall/js.valuePrepareString":t=>{t>>>=0;const o=i.encode(String(n(t+8)));r(t+16,o),e(t+24,o.length)},"syscall/js.valueLoadString":e=>{const t=n((e>>>=0)+8);o(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{e>>>=0,this.mem.setUint8(e+24,n(e+8)instanceof n(e+16)?1:0)},"syscall/js.copyBytesToGo":t=>{const r=o((t>>>=0)+8),i=n(t+32);if(!(i instanceof Uint8Array||i instanceof Uint8ClampedArray))return void this.mem.setUint8(t+48,0);const s=i.subarray(0,r.length);r.set(s),e(t+40,s.length),this.mem.setUint8(t+48,1)},"syscall/js.copyBytesToJS":t=>{const r=n((t>>>=0)+8),i=o(t+16);if(!(r instanceof Uint8Array||r instanceof Uint8ClampedArray))return void this.mem.setUint8(t+48,0);const s=i.subarray(0,r.length);r.set(s),e(t+40,s.length),this.mem.setUint8(t+48,1)},debug:e=>{console.log(e)}}}}async run(t){if(!(t instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=t,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,e,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[e,5],[this,6]]),this._idPool=[],this.exited=!1;let n=4096;const r=e=>{const t=n,r=i.encode(e+"\0");return new Uint8Array(this.mem.buffer,n,r.length).set(r),n+=r.length,n%8!=0&&(n+=8-n%8),t},o=this.argv.length,s=[];this.argv.forEach(e=>{s.push(r(e))}),s.push(0);Object.keys(this.env).sort().forEach(e=>{s.push(r(`${e}=${this.env[e]}`))}),s.push(0);const a=n;s.forEach(e=>{this.mem.setUint32(n,e,!0),this.mem.setUint32(n+4,0,!0),n+=8});if(n>=12288)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(o,a),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(e){const t=this;return function(){const n={id:e,this:this,args:arguments};return t._pendingEvent=n,t._resume(),n.result}}},e.require&&e.require.main===r&&e.process&&e.process.versions&&!e.process.versions.electron){t.argv.length<3&&(console.error("usage: go_js_wasm_exec [wasm binary] [arguments]"),t.exit(1));const e=new Go;e.argv=t.argv.slice(2),e.env=Object.assign({TMPDIR:n(440).tmpdir()},t.env),e.exit=t.exit,WebAssembly.instantiate(fs.readFileSync(t.argv[2]),e.importObject).then(n=>(t.on("exit",t=>{0!==t||e.exited||(e._pendingEvent={id:0},e._resume())}),e.run(n.instance))).catch(e=>{console.error(e),t.exit(1)})}})()}).call(this,n(15),n(7),n(35)(e))},341:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=341},342:function(e,t){},344:function(e,t){},346:function(e,t){},358:function(e,t){},360:function(e,t){},385:function(e,t){},387:function(e,t){},388:function(e,t){},393:function(e,t){},395:function(e,t){},401:function(e,t){},403:function(e,t){},422:function(e,t){},434:function(e,t){},437:function(e,t){},450:function(e,t,n){var r={"./content_en.json":73,"./content_es.json":451};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=450},451:function(e){e.exports=JSON.parse('{"hostKeyVerification":{"header":{"text":"Host Key Verification","note":"Title of host key verification modal"},"message":{"text":"WARNING: Your EC2 instance host key has changed. Either someone is eavesdropping on you (man-in-the-middle attack) or your system administrator changed the host key. The fingerprint for the instance {1} is {2}. Before connecting, contact your system administrator to verify if they changed the host key. Are you sure you want to continue connecting? (yes/no)","note":"Note to customer to accept host key or deny it."}},"clientSideStorageFailed":{"header":{"text":"Client Side Storage Failed","note":"Title of client side storage failure modal"},"message":{"text":"ERROR: Something went wrong while trying to access the host key fingerprint from your browser storage. We were unable to verify the host key fingerprint. The host key fingerprint from the EC2 instance {1} is \\n{2}. \\nDo you want to connect to the instance? (yes/no)","note":"Note to customer to trust host key or deny it."}},"modal":{"closeButtonAriaLabel":{"text":"Close modal"}},"instanceInfo":{"publicIps":{"text":"PublicIPs: {1}"},"privateIps":{"text":"PrivateIPs: {1}"}},"statusMessages":{"establishConnection":{"text":"Establishing Connection ..."},"unableToEstablishConnection":{"text":"Failed To Establish Connection"},"error":{"text":"Error occured while establishing connection"}},"errors":{"default":{"text":"Something went wrong. Try again later."},"AccessDeniedException":{"text":"Access denied by EC2 Instance Connect. Either your AWS credentials are not valid or you do not have access to the EC2 instance."},"BackendConnectionError":{"text":"EC2 Instance Connect is unable to connect to your instance. Ensure your instance network settings are configured correctly for EC2 Instance Connect. For more information, see Set up EC2 Instance Connect at https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-connect-set-up.html."},"EC2InstanceNotFoundException":{"text":"The specified instance was not found."},"EC2InstanceStateInvalidException":{"text":"Unable to connect to the instance because the instance is not in a valid state. Connecting to a stopped or terminated instance is not supported. If the instance is stopped, start your instance, and try to connect again."},"EC2InstanceTypeInvalidException":{"text":"The instance type is not supported for connecting via the serial console. Only virtualized Nitro instance types are currently supported."},"SerialConsoleAccessDisabledException":{"text":"Your account is not authorized to use the EC2 serial console. To authorize your account, run the EnableSerialConsoleAccess API."},"SerialConsoleSessionLimitExceededException":{"text":"The instance currently has 1 active serial console session. Only 1 session is supported at a time."},"SerialConsoleSessionUnavailableException":{"text":"Unable to start a serial console session. Try again later."},"ThrottlingException":{"text":"The requests were made too frequently and have been throttled. Wait a while and try again. To increase the limit on your request frequency, contact AWS Support."},"EICKeyPushError":{"text":"SendSSHPublicKey failed. Try again later."},"ISCKeyPushError":{"text":"SendSerialConsoleSSHPublicKey failed. Try again later."},"SSHConnectionError":{"text":"Error establishing SSH connection to your instance. Try again later."},"WasmGenerateKeyError":{"text":"Failed to generate an ephemeral public key to use for your instance. Try again later."},"WSConnectionError":{"text":"Failed connecting to your instance. Try again later."},"CallerRejectedHostKeyError":{"text":"Terminated the SSH handshake because you rejected the server\'s public host key."},"InstanceConnectWasmCspNotSupported":{"text":"EC2 Instance Connect is supported on Safari version 16.0 or higher."},"SerialConsoleWasmCspNotSupported":{"text":"EC2 Serial Console is supported on Safari version 16.0 or higher."},"InvalidInstanceConnectEndpointIdMalformedException":{"text":"The specified Instance Connect Endpoint ID is not valid. Specify an ID in the form eice-xxxxxxxxxxxxxxxxx. Update your request and try again."},"InvalidInstanceConnectEndpointIdNotFoundException":{"text":"The specified Instance Connect Endpoint ID does not exist."},"ServerInternalException":{"text":"DescribeInstanceConnectEndpoints failed. Try again later."},"ServiceUnavailableException":{"text":"DescribeInstanceConnectEndpoints is unavailable. Try again later."},"UnauthorizedException":{"text":"Access denied. Either your AWS credentials are not valid or you are not authorized to perform DescribeInstanceConnectEndpoints operation."},"DescribeEiceError":{"text":"The specified Instance Connect Endpoint does not exist or is not in create-complete state."}}}')},454:function(e,t,n){"use strict";n.r(t);var r,o,i,s=n(17),a=n(226),c=n(0),l=n.n(c),u=(n(242),n(18)),d=n.n(u),m=(n(243),n(213)),p=n(214);class f extends l.a.Component{constructor(e){super(e),this.terminalRef=l.a.createRef(),this.onData=this.onData.bind(this),this.onCursorMove=this.onCursorMove.bind(this),this.onKey=this.onKey.bind(this),this.onBinary=this.onBinary.bind(this),this.onLineFeed=this.onLineFeed.bind(this),this.onScroll=this.onScroll.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this),this.onRender=this.onRender.bind(this),this.onResize=this.onResize.bind(this),this.onTitleChange=this.onTitleChange.bind(this),this.fitAddon=new p.FitAddon,this.setupTerminal()}setupTerminal(){this.terminal=new m.Terminal(this.props.options);[this.fitAddon].forEach(e=>{this.terminal.loadAddon(e)}),this.terminal.onBinary(this.onBinary),this.terminal.onCursorMove(this.onCursorMove),this.terminal.onData(this.onData),this.terminal.onKey(this.onKey),this.terminal.onLineFeed(this.onLineFeed),this.terminal.onScroll(this.onScroll),this.terminal.onSelectionChange(this.onSelectionChange),this.terminal.onRender(this.onRender),this.terminal.onResize(this.onResize),this.terminal.onTitleChange(this.onTitleChange),this.props.customKeyEventHandler&&this.terminal.attachCustomKeyEventHandler(this.props.customKeyEventHandler)}componentDidMount(){this.terminalRef.current&&(this.terminal.open(this.terminalRef.current),this.fitAddon.fit(),window.addEventListener("resize",()=>{this.fitAddon.fit()}))}componentWillUnmount(){this.terminal.dispose()}onBinary(e){this.props.onBinary&&this.props.onBinary(e)}onCursorMove(){this.props.onCursorMove&&this.props.onCursorMove()}onData(e){this.props.onData&&this.props.onData(e)}onKey(e){this.props.onKey&&this.props.onKey(e)}onLineFeed(){this.props.onLineFeed&&this.props.onLineFeed()}onScroll(e){this.props.onScroll&&this.props.onScroll(e)}onSelectionChange(){this.props.onSelectionChange&&this.props.onSelectionChange()}onRender(e){this.props.onRender&&this.props.onRender(e)}onResize(e){this.props.onResize&&this.props.onResize(e)}onTitleChange(e){this.props.onTitleChange&&this.props.onTitleChange(e)}render(){return l.a.createElement("div",{className:this.props.className,ref:this.terminalRef,"data-analytics":"xterm","data-analytics-type":"funnel"})}}r=f,o="propTypes",i={className:d.a.string,options:d.a.object,onBinary:d.a.func,onCursorMove:d.a.func,onData:d.a.func,onKey:d.a.func,onLineFeed:d.a.func,onScroll:d.a.func,onSelectionChange:d.a.func,onRender:d.a.func,onResize:d.a.func,onTitleChange:d.a.func,customKeyEventHandler:d.a.func},(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i;var h=n(72);(new h.TangerineBox).getEventTracker();var y=n(215),v=n.n(y),g=n(216),b=n.n(g);let E;const w=()=>E,S=["connType","instanceId"],x=["osUser","sshPort"],C=["serialPort"],I=["instanceConnectEndpointId","privateIp","osUser","sshPort"];let N=function(e){return e.STANDARD="standard",e.SERIAL="serial",e.INSTANCE_CONNECT_ENDPOINT="eice",e}({});const T=[N.STANDARD,N.SERIAL,N.INSTANCE_CONNECT_ENDPOINT],j=new RegExp("^(i-)([0-9a-zA-Z]){8,17}$"),P=new RegExp("^eice-[0-9a-fA-F]{1,17}$"),A=new RegExp("^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"),O=e=>{D(e,S);const t=e.get("instanceId");if(!F(t))throw new Error("Instance ID in URL is invalid: "+t);const n=e.get("connType");if(!T.includes(n))throw new Error("Invalid connType, must be one of: "+T.toString())},k=e=>{D(e,x);const t=e.get("osUser");if(!M(t))throw new Error("Invalid osUser: "+t);const n=e.get("sshPort"),r=parseInt(n);if(!W(r))throw new Error("Invalid port: "+r)},R=e=>{D(e,C);const t=e.get("serialPort"),n=parseInt(t);if(!q(n))throw new Error("Invalid serialPort: "+n)},_=e=>{D(e,I);const t=e.get("instanceConnectEndpointId");if(!K(t))throw new Error("Instance Connect Endpoint Id in URL is invalid: "+t);const n=e.get("osUser");if(!M(n))throw new Error("Invalid osUser: "+n);const r=e.get("privateIp");if(!H(r))throw new Error("Invalid privateIp: "+r);const o=e.get("sshPort"),i=parseInt(o);if(!W(i))throw new Error("Invalid port: "+i);if(e.has("maxTunnelDuration")){const e=X(),t=parseInt(e);if(!L(t))throw new Error("Invalid maxTunnelDuration: "+t)}},D=(e,t)=>{const n=U(e,t);if(n.length>0)throw new Error("Missing required query params: "+n.toString())},U=(e,t)=>{const n=[];for(const r of t)e.has(r)||n.push(r);return n},F=e=>j.test(e),K=e=>P.test(e),H=e=>A.test(e),L=e=>e>=1&&e<=3600,M=e=>!0,W=e=>22===e,q=e=>0===e,z=e=>{const t=new URLSearchParams(window.location.search).get(e);if(!t)throw new Error(e+" query parameter not defined or empty.");return t},B=()=>{switch(z("connType")){case N.SERIAL:return N.SERIAL;case N.INSTANCE_CONNECT_ENDPOINT:return N.INSTANCE_CONNECT_ENDPOINT;case N.STANDARD:default:return N.STANDARD}},V=()=>z("instanceId"),G=()=>z("sshPort"),$=()=>z("instanceConnectEndpointId"),X=()=>{const e=new URLSearchParams(window.location.search).get("maxTunnelDuration");return e||"3600"},Y=()=>{const e=new URLSearchParams(window.location.search);for(const t of e.keys())if("oneClickV1Redirect".toLowerCase()===t.toLowerCase())return!0;return!1},J={InstanceId:"console-instance-id",IPAddresses:"console-instance-ip-address"},Z={StatusText:"console-terminal-loader-status"};var Q=n(73);const ee=["en","es"],te=l.a.createContext(Object.assign({},Q));var ne=n(233);const re=e=>{let t=e.instanceId;return e.instanceName&&(t=`${e.instanceId} (${e.instanceName})`),l.a.createElement("h3",{"data-integ":J.InstanceId,"data-testid":J.InstanceId},t)};var oe=e=>{const t=Object(c.useContext)(te);return e.loading||e.error?l.a.createElement(re,{instanceId:e.instanceId,instanceName:e.instanceName}):l.a.createElement(ne.a,null,l.a.createElement("div",{"data-analytics":"instance-info","data-analytics-type":"eventContext"},l.a.createElement(re,{instanceId:e.instanceId,instanceName:e.instanceName,"data-analytics":"instance-info-instance-id","data-analytics-type":"eventDetail"}),l.a.createElement("p",{"data-integ":J.IPAddresses,"data-testid":J.IPAddresses,"data-analytics":"instance-info-ips","data-analytics-type":"eventDetail"},e.publicIps&&e.publicIps.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,t.instanceInfo.publicIps.text.replace("{1}",e.publicIps.join(", "))),"    "),e.privateIps&&e.privateIps.length>0&&l.a.createElement("span",null,t.instanceInfo.privateIps.text.replace("{1}",e.privateIps.join(", "))))))};var ie=()=>{const[e]=Object(c.useState)(V()),{response:t,loading:n,errorMessage:r}=(e=>{const[t,n]=Object(c.useState)(),[r,o]=Object(c.useState)(!0),[i,s]=Object(c.useState)(""),a=Object(c.useCallback)(()=>{o(!0),w().EC2.describeInstances({InstanceIds:[e]}).promise().then(e=>{n(e),s(""),o(!1)}).catch(e=>{n(void 0),s(((e,t)=>{if(e){return`${t?t+": ":""}${e.code?e.code:e.name} - ${void 0===e.message||null===e.message||""===e.message?"An error has occurred":e.message}${e.requestId?` (requestId ${e.requestId})`:""}`}return""})(e)),o(!1)})},[]);return Object(c.useEffect)(()=>{a()},[e]),{response:t,loading:r,errorMessage:i}})(e),o=(e=>{const t={publicIps:[],privateIps:[],instanceName:void 0};if(!e)return t;const n=e.Reservations&&e.Reservations[0].Instances;if(void 0===n||0===n.length)return t;const r=n[0],o=[],i=[];let s;if(r.NetworkInterfaces&&r.NetworkInterfaces.length>0){const e=r.NetworkInterfaces[0];e.Association&&e.Association.PublicIp&&o.push(e.Association.PublicIp),e.PrivateIpAddress&&i.push(e.PrivateIpAddress)}return r.Tags&&r.Tags.length>0&&(s=(e=>{for(const t of e)if(t.Key&&"Name"===t.Key&&t.Value)return t.Value})(r.Tags)),{publicIps:o,privateIps:i,instanceName:s}})(t);return l.a.createElement(oe,{loading:n,error:r,instanceId:e,instanceName:o.instanceName,publicIps:o.publicIps,privateIps:o.privateIps})},se=(n(340),n(59));class ae{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w().EIC;this.eicClient=t,this.instanceId=e}async pushEicKey(e){try{await this.eicClient.sendSSHPublicKey({SSHPublicKey:e,InstanceId:this.instanceId,InstanceOSUser:z("osUser")}).promise();return""}catch(e){return e.name}}async pushSerialKey(e){try{await this.eicClient.sendSerialConsoleSSHPublicKey({SSHPublicKey:e,InstanceId:this.instanceId}).promise();return""}catch(e){return e.name}}}var ce=n(42),le=n.n(ce),ue=n(132),de=n.n(ue);const me=async e=>{const t=e.getCredentials(),n=await fetch("/ec2-instance-connect/ssh/tb/creds",{headers:{"x-csrf-token":t.csrfToken},method:"POST"});return await n.json()};function pe(e){const t={"X-Amz-Algorithm":"AWS4-HMAC-SHA256"};t["X-Amz-Credential"]=e.key+"/"+ve(e.timestamp,e.region,e.service),t["X-Amz-Date"]=ge(e.timestamp),t["X-Amz-Expires"]=e.expires,t["X-Amz-Security-Token"]=e.sessionToken,t["X-Amz-SignedHeaders"]=ye(e.headers),B()===N.INSTANCE_CONNECT_ENDPOINT?(t.instanceConnectEndpointId=e.query.instanceConnectEndpointId,t.maxTunnelDuration=e.query.maxTunnelDuration,t.privateIpAddress=e.query.privateIpAddress,t.remotePort=e.query.port):(t.instanceId=e.query.instanceId,t.port=e.query.port);const n=function(e,t,n,r,o){return[e.toUpperCase(),t,(i=n,Object.keys(i).sort().map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(i[e])})).join("&")),he(r),ye(r),fe(o)].join("\n");var i}(e.method,e.path,t,e.headers,e.payload),r=(o=e.timestamp,i=e.region,s=e.service,a=n,["AWS4-HMAC-SHA256",ge(o),ve(o,i,s),Ee(a,"hex")].join("\n"));var o,i,s,a;const c=function(e,t,n,r,o){const i=le.a.createHmac("sha256","AWS4"+e).update(be(t),"utf8").digest(),s=le.a.createHmac("sha256",i).update(n,"utf8").digest(),a=le.a.createHmac("sha256",s).update(r,"utf8").digest(),c=le.a.createHmac("sha256",a).update("aws4_request","utf8").digest();return le.a.createHmac("sha256",c).update(o,"utf8").digest("hex")}(e.secret,e.timestamp,e.region,e.service,r);return t["X-Amz-Signature"]=c,e.protocol+"://"+e.host+e.path+"?"+de.a.stringify(t)}function fe(e){return Ee(e,"hex")}function he(e){return Object.keys(e).sort().map((function(t){return t.toLowerCase().trim()+":"+e[t]+"\n"})).join("")}function ye(e){return Object.keys(e).sort().map((function(e){return e.toLowerCase().trim()})).join(";")}function ve(e,t,n){return[be(e),t,n,"aws4_request"].join("/")}function ge(e){return new Date(e).toISOString().replace(/[:\-]|\.\d{3}/g,"")}function be(e){return ge(e).substring(0,8)}function Ee(e,t){return le.a.createHash("sha256").update(e,"utf8").digest(t)}class we extends Error{constructor(e,t){super(t),this.name=e}}class Se extends we{constructor(e){super(Se.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Se,"errorName","WasmInitializeError");class xe extends we{constructor(e){super(xe.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(xe,"errorName","WasmGenerateKeyError");class Ce extends we{constructor(e){super(Ce.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ce,"errorName","EICKeyPushError");class Ie extends we{constructor(e){super(Ie.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ie,"errorName","ISCKeyPushError");class Ne extends we{constructor(e){super(Ne.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ne,"errorName","SSHParameterError");class Te extends we{constructor(e){super(Te.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Te,"errorName","WSConnectionError");class je extends we{constructor(e){super(je.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(je,"errorName","SSHConnectionError");class Pe extends we{constructor(e){super(Pe.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pe,"errorName","AccessDeniedException");class Ae extends we{constructor(e){super(Ae.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ae,"errorName","EC2InstanceNotFoundException");class Oe extends we{constructor(e){super(Oe.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Oe,"errorName","EC2InstanceStateInvalidException");class ke extends we{constructor(e){super(ke.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ke,"errorName","EC2InstanceTypeInvalidException");class Re extends we{constructor(e){super(Re.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Re,"errorName","EC2InstanceNotFoundError");class _e extends we{constructor(e){super(_e.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(_e,"errorName","SerialConsoleAccessDisabledException");class De extends we{constructor(e){super(De.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(De,"errorName","SerialConsoleSessionUnavailableException");class Ue extends we{constructor(e){super(Ue.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ue,"errorName","ThrottlingException");class Fe extends we{constructor(e){super(Fe.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fe,"errorName","SerialConsoleSessionLimitExceededException");class Ke extends we{constructor(e){super(Ke.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ke,"errorName","CallerRejectedHostKeyError");class He extends we{constructor(e){super(He.errorName,e)}}function Le(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(He,"errorName","BackendConnectionError");class Me extends we{constructor(e){super(Me.errorName,e)}}Le(Me,"errorName","SerialConsoleWasmCspNotSupported");class We extends we{constructor(e){super(We.errorName,e)}}Le(We,"errorName","InstanceConnectWasmCspNotSupported");const qe=async(e,t)=>{const n=z("privateIp"),r=G(),o=$(),i=X(),s=e.getCustomContext("region"),a=t.DnsName;if(void 0===a)throw"Something went wrong";const c=await me(e);return pe({method:"GET",host:a,path:"/openTunnel",service:"ec2-instance-connect",payload:"",key:c.accessKeyId,secret:c.secretAccessKey,sessionToken:c.sessionToken,protocol:"wss",timestamp:Date.now(),region:s,expires:60,query:{instanceConnectEndpointId:o,maxTunnelDuration:i,privateIpAddress:n,port:r},headers:{Host:a}})};class ze extends we{constructor(e){super(ze.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ze,"errorName","DescribeEiceError");let Be=function(e){return e.INIT="init",e.ERROR="error",e.CONNECTION_ESTABLISHED="connectionEstablished",e}({});const Ve=new se.TangerineBox,Ge=new Map([["WasmInitFailure",e=>new Se(e)],["KeygenFailure",e=>new xe(e)],["SignerFailure",e=>new xe(e)],["AuthException",e=>new Pe(e)],["AccessDeniedException",e=>new Pe(e)],["BackendConnFailure",e=>new He(e)],["EC2InstanceNotFoundException",e=>new Ae(e)],["EC2InstanceStateInvalidException",e=>new Oe(e)],["EC2InstanceTypeInvalidException",e=>new ke(e)],["InvalidArgsException",e=>new Re(e)],["SerialConsoleAccessDisabledException",e=>new _e(e)],["SerialConsoleSessionLimitExceededException",e=>new Fe(e)],["SerialConsoleSessionUnavailableException",e=>new De(e)],["ServiceException",e=>new Re(e)],["ThrottlingException",e=>new Ue(e)],["EICKeyPushFailure",e=>new Ce(e)],["ISCKeyPushFailure",e=>new Ie(e)],["WSConnFailure",e=>new Te(e)],["SSHConnFailure",e=>new je(e)],["SSHParamsFailure",e=>new Ne(e)],["CallerRejectedHostKeyError",e=>new Ke(e)],["InstanceConnectWasmCspNotSupported",e=>new We(e)],["SerialConsoleWasmCspNotSupported",e=>new Me(e)]]),$e=()=>{const e=new ae(V());window.eicclient=e,Ye();const t=new URL(window.location.href).searchParams.get("hostname");let n;return window.endHostname=t,n=B()===N.INSTANCE_CONNECT_ENDPOINT?(async e=>{const t=await w().EC2.describeInstanceConnectEndpoints({InstanceConnectEndpointIds:[e]}).promise();if(t.InstanceConnectEndpoints&&1===t.InstanceConnectEndpoints.length&&"create-complete"===t.InstanceConnectEndpoints[0].State)return t.InstanceConnectEndpoints[0];throw new ze("Instance Connect Endpoint does not exist or is not in desired state")})($()).then(e=>qe(Ve,e)).catch(e=>{throw new ze(e.name)}):(async e=>{const t=V();let n,r;const o=B();if(o===N.STANDARD)n=G(),r="/proxy/instance-connect";else{if(o!==N.SERIAL)throw new Error("Connection type invalid");n="22",r="/proxy/serial-console"}const i=e.getCustomContext("region"),s=e.getCustomContext("proxyHost"),a=await me(e);return pe({method:"GET",host:s,path:r,service:"oneclickv2proxy",payload:"",key:a.accessKeyId,secret:a.secretAccessKey,sessionToken:a.sessionToken,protocol:"wss",timestamp:Date.now(),region:i,expires:60,query:{instanceId:t,port:n},headers:{Host:s}})})(Ve),n.then(e=>{window.proxyUrl=e;const t=Ve.getCustomContext("wasmAssetPath"),n=Ve.getCdnUrl(t+"/main.wasm"),r=new Go;Xe(n,r.importObject).then(e=>{r.run(e)})})},Xe=async(e,t)=>fetch(e).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,t)).then(e=>e.instance),Ye=()=>{const e=Ve.getEventTracker();window.logInfoFrame=t=>{const n=JSON.parse(t);console.log(t),e.addEvent(n)}};var Je=n(74),Ze=n(230),Qe=n(231),et=n(232),tt=n(133);class nt extends we{constructor(e){super(nt.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(nt,"errorName","ClientSideStorageError");class rt extends we{constructor(e){super(rt.errorName,e)}}let ot,it,st;!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(rt,"errorName","ClientSideFetchError");var at=e=>{let{storageManager:t,instanceId:n}=e;const r="eic_oneclick_"+n+"_hostkey",o=c.useContext(te),[i,s]=c.useState({visible:!1,storageFailure:!1}),[a,l]=c.useState({hostkey:"",hostkeyAlgo:""}),u=o.hostKeyVerification.message.text.replace("{1}",n).replace("{2}",a.hostkey),d=o.clientSideStorageFailed.message.text.replace("{1}",n).replace("{2}",a.hostkey),m=o.hostKeyVerification.header.text,p=o.clientSideStorageFailed.header.text;window.validateHostKey=(e,t,n,r,o)=>{ot=n,it=r,st=o,l({hostkey:e,hostkeyAlgo:t})};return c.useEffect(()=>{if(""===a.hostkey||""===a.hostkeyAlgo)return;const e=B();"standard"===e||"eice"===e?(async()=>{let e;try{e=await t.getHostKeys(r,a.hostkeyAlgo)}catch(e){return e instanceof rt?void s({visible:!0,storageFailure:!0}):void it()}if(void 0===e)try{return await t.storeHostKeys(r,a.hostkey,a.hostkeyAlgo),void ot()}catch(e){return e instanceof nt?void s({visible:!0,storageFailure:!0}):void it()}e&&e.hostkey!==a.hostkey?s({visible:!0,storageFailure:!1}):ot()})():(new se.TangerineBox).getCustomContext("serialConsoleHostKey")!==a.hostkey?it():ot()},[a]),i.visible?c.createElement(Ze.a,{"data-testid":"hostkey-verification-modal","data-integ":"hostkey-verification-modal","data-analytics-render":!0,onDismiss:()=>{st(),s({visible:!1,storageFailure:!1})},visible:i.visible,closeAriaLabel:o.modal.closeButtonAriaLabel.text,footer:c.createElement(Qe.a,{float:"right"},c.createElement(et.a,{direction:"horizontal",size:"xs"},c.createElement(tt.a,{"data-testid":"store-hostkey-button","data-integ":"store-hostkey-button",variant:"primary",onClick:async()=>{await t.storeHostKeys(r,a.hostkey,a.hostkeyAlgo),ot(),s({visible:!1,storageFailure:!1})}},"Yes"),c.createElement(tt.a,{"data-testid":"dismiss-button","data-integ":"dismiss-button",variant:"link",onClick:()=>{st(),s({visible:!1,storageFailure:!1})}},"No"))),header:i.storageFailure?p:m},i.storageFailure?d:u):c.createElement(c.Fragment,null)},ct=n(222),lt=n.n(ct),ut=n(466);var dt=()=>{const e=Object(c.useContext)(te);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"terminal-loader-container","data-analytics":"terminal-loader","data-analytics-type":"eventContext"},l.a.createElement("div",{className:"terminal-loader-center"},l.a.createElement("div",null,l.a.createElement(ut.a,{className:"terminal-loader",size:"large"})),l.a.createElement(Qe.a,{color:"inherit",variant:"h5",textAlign:"center","data-integ":Z.StatusText,"data-testid":Z.StatusText,"data-analytics":"terminal-loader-text","data-analytics-type":"eventDetail"},e.statusMessages.establishConnection.text))))};class mt extends Error{}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(mt,"errorName","HostKeyFetchError");var pt=n(229);const ft={type:"warning",dismissible:!0,content:"You have been redirected to the latest browser-based EC2 Instance Connect experience. Please update your bookmark to this URL. The redirect from the old bookmark will not be supported in the near future."};var ht=e=>{const t=l.a.useContext(te).errors;let n=t.default.text;if(e.error instanceof we){const r=t[e.error.name];void 0!==r&&(n=r.text)}const r=[];Y()&&r.push(ft),r.push({header:"Failed to connect to your instance",type:"error",content:n,dismissible:!1});const o=Object(c.useRef)(null);return l.a.createElement("div",{className:"container","data-analytics-render":!0},l.a.createElement(pt.a,{items:r}),l.a.createElement(f,{className:"terminal-container",ref:o}))};class yt extends we{constructor(e){super(yt.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yt,"errorName","InvalidInstanceConnectEndpointIdNotFoundException");class vt extends we{constructor(e){super(vt.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vt,"errorName","InvalidInstanceConnectEndpointIdMalformedException");class gt extends we{constructor(e){super(gt.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(gt,"errorName","ServerInternalException");class bt extends we{constructor(e){super(bt.errorName,e)}}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(bt,"errorName","ServiceUnavailableException");const Et=new Map([[Se.errorName,0],[xe.errorName,0],[Ce.errorName,0],[Ie.errorName,0],[je.errorName,0],[Te.errorName,0],[Ne.errorName,0],[mt.errorName,0],[Ke.errorName,0],[nt.errorName,0],[rt.errorName,0],[ze.errorName,0],[yt.errorName,0],[vt.errorName,0],[gt.errorName,0],[bt.errorName,0]]),wt=(new se.TangerineBox).getEventTracker(),St=Object(c.createContext)({recordSuccessForCustomConsoleErrorMetrics:()=>{const e={overallConsoleErrorMetric:0,customMetricValue:{...Object.fromEntries(Et)}};wt.addEvent({tbCustomLog:e})}});class xt extends c.Component{constructor(e){super(e),this.state={error:null,errorInfo:null}}componentDidCatch(e,t){const n={...Object.fromEntries(Et)};e instanceof we&&(n[e.name]=1);const r={overallConsoleErrorMetric:e instanceof Ke?0:1,customMetricValue:n,errMsg:e.message};wt.addError({tbCustomLog:r}),this.setState({error:e,errorInfo:t.componentStack})}render(){return this.state.error?l.a.createElement(ht,{error:this.state.error}):this.props.children}}var Ct=xt,It=n(80);class Nt{async getHostKeys(e,t){let n;try{return n=await It.getItem(e),(n||[]).find(e=>{let{algorithm:n}=e;return n===t})}catch(e){throw new rt("Error fetching hostkey")}}async storeHostKeys(e,t,n){let r;try{r=await It.getItem(e)}catch(e){throw new nt("Error fetching hostkey")}if(r){const o=r.find(e=>{let{algorithm:t}=e;return t===n});if(o){o.hostkey=t;try{await It.setItem(e,r)}catch(e){throw new nt("Error storing hostkey")}return}}else r=new Array;const o={hostkey:t,algorithm:n,addedDate:(new Date).toISOString()};r.push(o);try{await It.setItem(e,r)}catch(e){throw new nt("Error storing hostkey")}}}var Tt=n(225),jt=n(467);let Pt=function(e){return e.MALFORMED="InvalidInstanceConnectEndpointId.Malformed",e.NOT_FOUND="InvalidInstanceConnectEndpointId.NotFound",e.SERVER_INTERNAL="InternalError",e.SERVER_UNAVAILABLE="Unavailable",e.UNAUTHORIZED="UnauthorizedOperation",e.UNAUTHENTICATED="AuthFailure",e}({});class At extends we{constructor(e){super(At.errorName,e)}}function Ot(){const e=Object(Tt.a)();let t=!1;if(e&&e.name&&"safari"===e.name.toLowerCase()){t=!0;try{parseFloat(e.version||"0")>=16&&(t=!1)}catch(t){console.log("Unable to parse version from userAgent"),console.log(e)}}return t}!function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(At,"errorName","AccessDeniedException");var kt=()=>{const[e]=l.a.useState(()=>{const e=(()=>{const e=document.documentElement.lang.replace("-","_");return e&&ee.includes(e)?e:"en"})(),t=n(450)(`./content_${e}.json`);return lt.a.all([Q,t])}),[t,r]=l.a.useState(!1),o=Object(c.useContext)(St),i=V(),s=(()=>{const[,e]=Object(c.useState)({});return Object(c.useCallback)(t=>{e(()=>{throw t})},[e])})(),a=Object(c.useRef)(null);Object(c.useEffect)(()=>{window.oneclickterm=a},[a]);const[u,d]=Object(c.useState)({status:Be.INIT.toString(),wasmFailureStatus:"",statusMsg:""});Object(c.useEffect)(()=>{window.updateWasmStatus=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r={status:e,wasmFailureStatus:t,statusMsg:n};d(r)}},[d]);const{clearAndShowQueuedFlashMessages:m,queueFlashMessages:p}=Object(Je.useFlashbar)();Object(c.useEffect)(()=>{if(u.status.includes(Be.ERROR.toString())){if(p({type:"error",dismissible:!0,content:e.statusMessages.error.text}),m(),Ge.has(u.wasmFailureStatus))throw Ge.get(u.wasmFailureStatus)(u.statusMsg)}else u.status.includes(Be.CONNECTION_ESTABLISHED.toString())&&(performance.measure("ClickToConnectionEstablished"),o.recordSuccessForCustomConsoleErrorMetrics())},[u]);const h=()=>{Y()&&p(ft)};Object(c.useEffect)(()=>{h(),Ot()||(p({type:"info",dismissible:!0,content:"Initializing Session"}),m(),h(),$e().then(()=>m()).catch(e=>{e instanceof ze&&y(e.message),d({status:Be.ERROR.toString(),wasmFailureStatus:"",statusMsg:e.message}),s(new Se(e.message))}))},[]),Object(c.useEffect)(()=>{if(Ot())throw B()==N.SERIAL?Ge.get("SerialConsoleWasmCspNotSupported")("Using un-supported safari version"):Ge.get("InstanceConnectWasmCspNotSupported")("Using un-supported safari version")},[]);const y=e=>{switch(e){case Pt.MALFORMED:return void s(new vt(e));case Pt.NOT_FOUND:return void s(new yt(e));case Pt.SERVER_INTERNAL:return void s(new gt(e));case Pt.SERVER_UNAVAILABLE:return void s(new bt(e));case Pt.UNAUTHORIZED:case Pt.UNAUTHENTICATED:return void s(new At(e));default:s(new ze(e))}};return l.a.createElement("div",{className:"container "+(t?"instance-info-hidden":"")},l.a.createElement(te.Provider,{value:e},l.a.createElement(at,{storageManager:new Nt,instanceId:i}),l.a.createElement(Je.FlashbarView,null),u.status===Be.INIT.toString()&&l.a.createElement(dt,null),l.a.createElement(f,{className:"terminal-container",ref:a}),!t&&l.a.createElement("div",{className:"instance-info"},l.a.createElement(jt.a,{iconAlign:"right",iconName:"close",variant:"inline-icon",className:"instance-info-close",onClick:()=>{r(!0);const e=setInterval(()=>{window.dispatchEvent(new Event("resize"))},100);setTimeout(()=>{clearInterval(e)},1e3)}}),l.a.createElement(ie,null))))};document.addEventListener("DOMContentLoaded",()=>{(async()=>{"undefined"!=typeof AWSC&&void 0!==AWSC.Feedback&&(AWSC.Feedback.setEndpoint("https://console.aws.amazon.com/feedback/submit-feedback"),AWSC.Feedback.setFolder("c13cd9a5-b858-4cfe-b3e1-5acd77fde4d6")),"undefined"!=typeof AWSC&&void 0!==AWSC.Timer&&AWSC.Timer.customerReady(),performance.measure("clickToCustomerReady"),(()=>{const e=new URLSearchParams(window.location.search);O(e);const t=e.get("connType");t===N.STANDARD?k(e):t===N.SERIAL?R(e):t===N.INSTANCE_CONNECT_ENDPOINT&&_(e)})(),(()=>{if(E)return E;const e=new h.TangerineBox,t=e.getCredentials(),n=e.getCustomContext("region"),r=new v.a({credentials:t,region:n,correctClockSkew:!0}),o=new b.a({credentials:t,region:n,correctClockSkew:!0}),i=e.getEventTracker();i.emitAwsSdkMetrics(r),i.emitAwsSdkMetrics(o),E={EC2:r,EIC:o}})(),Object(s.render)(l.a.createElement(Ct,null,l.a.createElement(a.a,null,l.a.createElement(Je.FlashbarProvider,null,l.a.createElement(kt,null)))),document.querySelector("#app"))})()})},73:function(e){e.exports=JSON.parse('{"hostKeyVerification":{"header":{"text":"Host Key Verification","note":"Title of host key verification modal"},"message":{"text":"WARNING: Your EC2 instance host key has changed. Either someone is eavesdropping on you (man-in-the-middle attack) or your system administrator changed the host key. The fingerprint for the instance {1} is \\n{2}. Before connecting, contact your system administrator to verify if they changed the host key. Are you sure you want to continue connecting? (yes/no)","note":"Note to customer to accept host key or deny it."}},"clientSideStorageFailed":{"header":{"text":"Client Side Storage Failed","note":"Title of client side storage failure modal"},"message":{"text":"ERROR: Something went wrong while trying to access the host key fingerprint from your browser storage. We were unable to verify the host key fingerprint. The host key fingerprint from the EC2 instance {1} is \\n{2}. \\nDo you want to connect to the instance? (yes/no)","note":"Note to customer to trust host key or deny it."}},"modal":{"closeButtonAriaLabel":{"text":"Close modal"}},"instanceInfo":{"publicIps":{"text":"PublicIPs: {1}"},"privateIps":{"text":"PrivateIPs: {1}"}},"statusMessages":{"establishConnection":{"text":"Establishing Connection ..."},"unableToEstablishConnection":{"text":"Failed To Establish Connection"},"error":{"text":"Error occurred while establishing connection"}},"errors":{"default":{"text":"Something went wrong. Try again later."},"AccessDeniedException":{"text":"Access denied by EC2 Instance Connect. Either your AWS credentials are not valid or you do not have access to the EC2 instance."},"BackendConnectionError":{"text":"EC2 Instance Connect is unable to connect to your instance. Ensure your instance network settings are configured correctly for EC2 Instance Connect. For more information, see Set up EC2 Instance Connect at https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-connect-set-up.html."},"EC2InstanceNotFoundException":{"text":"The specified instance was not found."},"EC2InstanceStateInvalidException":{"text":"Unable to connect to the instance because the instance is not in a valid state. Connecting to a stopped or terminated instance is not supported. If the instance is stopped, start your instance, and try to connect again."},"EC2InstanceTypeInvalidException":{"text":"The instance type is not supported for connecting via the serial console. Only virtualized Nitro instance types are currently supported."},"SerialConsoleAccessDisabledException":{"text":"Your account is not authorized to use the EC2 serial console. To authorize your account, run the EnableSerialConsoleAccess API."},"SerialConsoleSessionLimitExceededException":{"text":"The instance currently has 1 active serial console session. Only 1 session is supported at a time."},"SerialConsoleSessionUnavailableException":{"text":"Unable to start a serial console session. Try again later."},"ThrottlingException":{"text":"The requests were made too frequently and have been throttled. Wait a while and try again. To increase the limit on your request frequency, contact AWS Support."},"EICKeyPushError":{"text":"SendSSHPublicKey failed. Try again later."},"ISCKeyPushError":{"text":"SendSerialConsoleSSHPublicKey failed. Try again later."},"SSHConnectionError":{"text":"Error establishing SSH connection to your instance. Try again later."},"WasmGenerateKeyError":{"text":"Failed to generate an ephemeral public key to use for your instance. Try again later."},"WSConnectionError":{"text":"Failed connecting to your instance. Try again later."},"CallerRejectedHostKeyError":{"text":"Terminated the SSH handshake because you rejected the server\'s public host key."},"InstanceConnectWasmCspNotSupported":{"text":"EC2 Instance Connect is supported on Safari version 16.0 or higher."},"SerialConsoleWasmCspNotSupported":{"text":"EC2 Serial Console is supported on Safari version 16.0 or higher."},"InvalidInstanceConnectEndpointIdMalformedException":{"text":"The specified Instance Connect Endpoint ID is not valid. Specify an ID in the form eice-xxxxxxxxxxxxxxxxx. Update your request and try again."},"InvalidInstanceConnectEndpointIdNotFoundException":{"text":"The specified Instance Connect Endpoint ID does not exist."},"ServerInternalException":{"text":"DescribeInstanceConnectEndpoints failed. Try again later."},"ServiceUnavailableException":{"text":"DescribeInstanceConnectEndpoints is unavailable. Try again later."},"UnauthorizedException":{"text":"Access denied. Either your AWS credentials are not valid or you are not authorized to perform DescribeInstanceConnectEndpoints operation."},"DescribeEiceError":{"text":"The specified Instance Connect Endpoint does not exist or is not in create-complete state."}}}')},98:function(e,t){}});
//# sourceMappingURL=main.js.map